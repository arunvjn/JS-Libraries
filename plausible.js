!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).plausibleTracker=t()}(this,function(){"use strict";return function(e){const t=()=>({hashMode:!1,trackLocalhost:!1,url:location.href,domain:location.hostname,referrer:document.referrer||null,deviceWidth:window.innerWidth,apiHost:"https://plausible.io",...e}),n=(e,n,o)=>{!function(e,t,n){const o=/^localhost$|^127(?:\.[0-9]+){0,2}\.[0-9]+$|^(?:0*:)*?:?0*1$/.test(location.hostname)||"file:"===location.protocol;if(!t.trackLocalhost&&o)return console.warn("[Plausible] Ignoring event because website is running locally");try{if("true"===window.localStorage.plausible_ignore)return console.warn('[Plausible] Ignoring event because "plausible_ignore" is set to "true" in localStorage')}catch(e){}const r={n:e,u:t.url,d:t.domain,r:t.referrer,w:t.deviceWidth,h:t.hashMode?1:0,p:n&&n.props?JSON.stringify(n.props):void 0},i=new XMLHttpRequest;i.open("POST",`${t.apiHost}/api/event`,!0),i.setRequestHeader("Content-Type","text/plain"),i.send(JSON.stringify(r)),i.onreadystatechange=(()=>{4===i.readyState&&n&&n.callback&&n.callback()})}(e,{...t(),...o},n)},o=(e,t)=>{n("pageview",t,e)};return{trackEvent:n,trackPageview:o,enableAutoPageviews:()=>{const t=()=>o(),n=history.pushState;return n&&(history.pushState=function(e,o,r){n.apply(this,[e,o,r]),t()},addEventListener("popstate",t)),e&&e.hashMode&&addEventListener("hashchange",t),o(),function(){n&&(history.pushState=n,removeEventListener("popstate",t)),e&&e.hashMode&&removeEventListener("hashchange",t)}},enableAutoOutboundTracking:(e=document,t={subtree:!0,childList:!0,attributes:!0,attributeFilter:["href"]})=>{function o(e){n("Outbound Link: Click",{props:{url:this.href}}),"undefined"!=typeof process&&process&&"test"===process.env.NODE_ENV||setTimeout(()=>{location.href=this.href},150),e.preventDefault()}const r=new Set;function i(e){e instanceof HTMLAnchorElement?e.host!==location.host&&(e.addEventListener("click",o),r.add(e)):"querySelectorAll"in e&&e.querySelectorAll("a").forEach(i)}function a(e){e instanceof HTMLAnchorElement?(e.removeEventListener("click",o),r.delete(e)):"querySelectorAll"in e&&e.querySelectorAll("a").forEach(a)}const s=new MutationObserver(e=>{e.forEach(e=>{"attributes"===e.type?(a(e.target),i(e.target)):"childList"===e.type&&(e.addedNodes.forEach(i),e.removedNodes.forEach(a))})});return e.querySelectorAll("a").forEach(i),s.observe(e,t),function(){r.forEach(e=>{e.removeEventListener("click",o)}),r.clear(),s.disconnect()}}}}});
